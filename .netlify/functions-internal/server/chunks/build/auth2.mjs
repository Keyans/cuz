import{h as e}from"./server.mjs";const t=e("auth",{state:()=>({user:null,token:null,loading:!1,error:null}),getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user},actions:{init(){const e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(this.token=e,this.user=JSON.parse(t))},async login(e){this.loading=!0,this.error=null;try{const t="demo@example.com"===e.email&&"password123"===e.password,r=await new Promise((r=>{setTimeout((()=>{r(t?{user:{id:"demo-user",email:e.email,name:"体验账号用户",role:"demo",avatar:"/assets/demo-avatar.png"},token:"demo-jwt-token"}:{user:{id:"1",email:e.email,name:"Regular User",role:"user"},token:"fake-jwt-token"})}),1e3)}));return this.user=r.user,this.token=r.token,localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),r}catch(e){throw this.error=e.message||"Failed to login",e}finally{this.loading=!1}},async register(e){this.loading=!0,this.error=null;try{const t=await new Promise((t=>{setTimeout((()=>{t({user:{id:"1",email:e.email,name:e.name,role:"user"},token:"fake-jwt-token"})}),1e3)}));return this.user=t.user,this.token=t.token,localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),t}catch(e){throw this.error=e.message||"Failed to register",e}finally{this.loading=!1}},logout(){this.user=null,this.token=null,localStorage.removeItem("token"),localStorage.removeItem("user")}}});export{t as u};
//# sourceMappingURL=auth2.mjs.map
